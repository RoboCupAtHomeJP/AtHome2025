<sub>[READMEへ](../../README.md)</sub>

[日本語](./tu_ja.md) | [English](./tu_en.md)

# Kachaka Challenge

## メインゴール

ロボットが散らかった部屋の片付けを行う．特に，移動式の棚を活用する．部屋のあらかじめ決められた領域に分散している物体を所定の位置へ片付ける．

**制限時間**：10分

## テクニカルフォーカス

既知環境での自律移動，物体認識，物体把持，タスクプランニング，複数ロボットの協調動作．

## 特記事項

このタスクではPreferred Robotics製のスマートファニチャーロボット，カチャカを利用する（Proではない標準版を1代以上）ことを強く推奨する．

## セットアップ

- **場所**：家庭環境を模したアリーナ環境が用いられる．特に競技はリビングルームで行われる．アリーナ内は事前にマッピングすることが可能とする（既知環境）．
- **スタートロケーション**：ロボットは，アリーナの外から`ドアオープン`（扉を開くこと）よりスタートする．
- **物体**: [使用物体](#使用物体)を参照すること．
- **環境**: 配置先にはカチャカシェルフ（3段）が含まれる．詳細は[競技環境](#競技環境)を参照すること．

## シナリオ

1. **配置**：`レフェリー`は，チームにロボットをスタート位置へ移動させるよう指示する．また，チームメンバーは`レフェリー`からの指示通りに，使用する物体を配置する．
1. **スタート**：チームは最後の簡単なセットアップ（スタートボタンを押す等）を完了し，エリアを離れる．このとき，ボタンを2つ以上押すなど複雑なセットアップ手順の実施は認められない．
1. **ドアオープン**：`レフェリー`はスタートの合図を出し，タイマーをスタートさせる．同時に，`チームメンバ`はドアを開ける．このとき，ロボットは自律的にアリーナへ入場しなければならない．

## 使用物体

使用される物体については，一般規定（General Rules & Regulations）の[物体（Objects）](gr_ja.md#物体objects)を確認すること．

### 物体種類の割合

- `標準オブジェクト` ｜　公開：9個　→　競技：7個
- `事前公開オブジェクト` ｜　公開：3個　→　競技：3個
- `未知オブジェクト` ｜　公開：0個　→　競技：2個

> [!WARNING]
> 使用される未知オブジェクトは同一トライアルにおいては全チーム共通である．トライアルごとに異なる未知オブジェクトが使用される．

## 物体カテゴリーごと配置場所

物体カテゴリーごとの配置場所については以下の通りである．

| ID | Placement Goal (Furniture) | Object Category |
| --- | --- | --- |
| 5a | Tray A        | Food Item |
| 5b | Tray B        | Food Item |
| 6  | Container​  | Unknown Item​ |
| 8a | Kachaka Shelf A（部屋A）   | Kitchen Item（2個）​ |
| 9a | Kachaka Shelf B（部屋B） | Task Item​（2個） |
​

## 競技環境

片付け先のカチャカシェルフにコンピュータやネットワーク機器を取り付けるなどの加工を行っても良い．その場合は各チームがシェルフを持ち込むこと．なお，競技で使用するシェルフはすべてロボットインスペクションを通すこと．

## リスタート

リスタート時に以下の行為が認められる．

- チームメンバーがリスタートを宣言した時点で，ロボットが把持しているオブジェクトを取り除くこと（アリーナ外へ出す）．
- ロボットがスタート地点で待機している間に物体を初期位置へ戻すこと．

## デウス・エクス・マキナ

本タスクでは，次のデウス・エクス・マキナが採用される．デウス・エクス・マキナでは該当アクションの点数は入らないが，より簡単な手法で部分的なタスクをスキップし，全体的なタスクを継続することができる．

|Action|Bypassing|
|------|---------|
| 物体の把持 | ロボットが指示した物体を，`レフェリー`がロボットに持たせる（あるいは特定の場所に置く．このとき，ロボットは物体の認識結果と共に物体の位置と名前，指示などを正確に伝える必要がある |
| 物体の設置 | `レフェリー`がロボットの持っている（あるいは特定の場所にある）物体を，ロボットの指示した場所に設置する．このとき，ロボットは物体の配置位置と名前，指示などを正確に伝える必要がある |

## スコアシート

| Action                                              | Score |
| --------------------------------------------------- | ----- |
| 物体を把持する                          | $10 \times 12$ |
| 物体を運搬し，設置・収納する            | $10 \times 12$ |
| 物体を正しい場所に設置・収納する        | $15 \times 12$ |
| **ボーナス**                                          |       |
| 片付け先の家具をキッチンへ移動させる        | $20 \times 4$ |
| **ペナルティ(())                                          |       |
| 不参加（無断）                                      | $-500$  |
|                                                     |       |
| 合計（ボーナスタスクを含む）                        | $500$   |

**得点係用のスコアシート**: [TU-score_sheet](./doc/RCJ2024_OPL_TU-score_sheet.pdf)

## 指示 (Instructions)

### 得点係へ (To Scorer)

得点係は*General Rules*の[採点方法](./gr_ja.md#採点方法scoring-system)に定義されているように選ばれ，以下のタスクを行う．

- 競技が始まる前に集まる．
- スコアシートの情報についての指示を受ける．
- 競技チームの競技をスコアリングする．
- 他の得点係とTCとスコアを確認し合う．
- スコアシートをTCに提出する．

### TCへ (To TC)

- *Setup Days*中:
  - `事前公開オブジェクト`のリストを発表する．
  - `未知物体`を準備する．
- 競技前:
  - 未知物体を指定し，アナウンスする．
  - 物体の初期設置場所を選択し，アナウンスする．
