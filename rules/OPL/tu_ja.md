<sub>[READMEへ](../../README.md)</sub>

[日本語](./tu_ja.md) | [English](./tu_en.md)

# Kachaka Challenge (Extended Tidy Up)

## メインゴール

指定された部屋に分散している物体を所定の位置へ片付ける．特に，移動式の棚を活用する．

**制限時間**：10分

## テクニカルフォーカス

既知環境での自律移動，物体認識，物体把持，タスクプランニング，複数ロボットの協調動作．

## 特記事項

このタスクではPreferred Robotics製のスマートファニチャーロボット，カチャカを利用する．

## セットアップ

- **場所**：家庭環境を模したアリーナ環境が用いられる．特に競技はリビングルームで行われる．アリーナ内は事前にマッピングすることが可能とする（既知環境）．
- **スタートロケーション**：ロボットは，アリーナの外から`ドアオープン`（扉を開くこと）よりスタートする．
- **環境**: 配置先にはカチャカシェルフ（3段）が含まれる．

## シナリオ

1. **配置**：`TC`は，チームにロボットをスタート位置へ移動させるよう指示する．また，チームメンバーは`TC`からの指示通りに，使用する物体を配置する．
1. **スタート**：チームは最後の簡単なセットアップ（スタートボタンを押す等）を完了し，エリアを離れる．このとき，ボタンを2つ以上押すなど複雑なセットアップ手順の実施は認められない．
1. **ドアオープン**：`TC`はスタートの合図を出し，タイマーをスタートさせる．同時に，`チームメンバ`はドアを開ける．このとき，ロボットは自律的にアリーナへ入場しなければならない．

## 使用物体

使用される物体については，一般規定（General Rules & Regulations）の[物体（Objects）](gr_ja.md#物体objects)を確認すること．

### 物体種類の割合

- `標準オブジェクト`     ｜　公開：9個　→　競技：7個
- `事前公開オブジェクト` ｜　公開：3個　→　競技：3個
- `未知オブジェクト`     ｜　公開：0個　→　競技：2個

> [!WARNING]
> 使用される未知オブジェクトは同一トライアルにおいては全チーム共通である．トライアルごとに異なる未知オブジェクトが使用される．

## 物体カテゴリーごと配置場所

物体カテゴリーごとの配置場所は以下の通りである．

| Storage Destination | Initial location | Final destination |  Object Category |
| ------------------|------- | ------ | ------------ |
| Counter           | Living | Living | Food         |
| Box​               | Living | Living | Unknown      |
| Kachaka Shelf A   | Living | Room A | Kitchen ​     |
| Kachaka Shelf B   | Living | Room B | Task​         |

## 競技環境

片づけ先として利用するカチャカシェルフはつけ外し可能な状態でなければならない．

## リスタート

リスタート時に以下の行為が認められる．

- チームメンバーがリスタートを宣言した時点で，ロボットが把持しているオブジェクトを取り除くこと（アリーナ外へ出す）．
- ロボットがスタート地点で待機している間に物体を初期位置へ戻すこと．

## デウス・エクス・マキナ

本タスクでは，次のデウス・エクス・マキナが採用される．デウス・エクス・マキナでは該当アクションの点数は入らないが，より簡単な手法で部分的なタスクをスキップし，全体的なタスクを継続することができる．

|Action|Bypassing|
|------|---------|
| 物体の把持 | ロボットが指示した物体を，`TC`がロボットに持たせる（あるいは特定の場所に置く．このとき，ロボットは物体の認識結果と共に物体の位置と名前，指示などを正確に伝える必要がある |
| 物体の設置 | `TC`がロボットの持っている（あるいは特定の場所にある）物体を，ロボットの指示した場所に設置する．このとき，ロボットは物体の配置位置と名前，指示などを正確に伝える必要がある |

## スコアシート

| Action                                              | Score          |
| --------------------------------------------------- | -----          |
| リビングルームへ移動する                                | $20$           |
| 物体を把持する                                        | $20 \times 12$ |
| 物体を収納する                                        | $10 \times 12$ |
| 物体を指定された場所に収納する                           | $10 \times 12$ |
| **ボーナス**                                         |                |
| 移動式の棚を指定された部屋へ移動させる                    | $20 \times 2$  |
| 移動式の棚に置かれた物体を最終的な片付け先へ収納する        | $25$ each       |
| **ペナルティ**                                       |                 |
| 不参加（無断）                                        | $-500$         |
|                                                    |               |
| 合計（ボーナスタスクを除く）                            | $500$          |

**得点係用のスコアシート**: [TU-score_sheet](./doc/RCJ2025_OPL_TU-score_sheet.pdf)

## 指示 (Instructions)

### 得点係へ (To Scorer)

得点係は*General Rules*の[採点方法](./gr_ja.md#採点方法scoring-system)に定義されているように選ばれ，以下のタスクを行う．

- 競技が始まる前に集まる．
- スコアシートの情報についての指示を受ける．
- 競技チームの競技をスコアリングする．
- 他の得点係とTCとスコアを確認し合う．
- スコアシートをTCに提出する．

### TCへ (To TC)

- *Setup Days*中:
  - `事前公開オブジェクト`のリストを発表する．
  - `未知物体`を準備する．
- 競技前:
  - 未知物体を指定し，アナウンスする．
  - 物体の初期設置場所を選択し，アナウンスする．
