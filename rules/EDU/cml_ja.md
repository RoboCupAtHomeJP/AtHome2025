[日本語](./cml_ja.md) | [English](./cml_en.md)

# Carry My Luggage（CML）作成中
世界大会の以下のルールをもとにTLMでルールの詳細を最終決定します．
- [Playground Rules 2024](https://drive.google.com/file/d/1CIMQquIntiJZNT4Eg_rq3Nol-29BPBKL/view?usp=drive_link)
- [@Home 2022 Rules](https://drive.google.com/file/d/1yUZBFk4zBO_akltSCd_zbdAvzK5aLwzn/view?usp=drive_link).

参考動画：https://youtu.be/dzyJ1dHTulc

> **Note**
> 参考動画は完璧ではありません．年によってルールも異なるので，あくまで参考程度にしてください．
> 気になる点や議論したい点などがありましたら，GitHubの[Issues](https://github.com/RoboCupAtHomeJP/Rule2023/issues)にご送信ください．

##メインゴール

外に駐車された車を仮定し、そこまでロボットがオペレーターを追従しながら荷物運搬を支援することを想定したタスクである。ロボットは指定された紙バッグをつかんだのち、既知環境であるアリーナから道環境までオペレーターを追従し、荷物運搬を支援する。その後、自動で開始位置まで戻ることを行う。

##フォーカス

このタスクでは、指さしの認識、マニピュレーション、既知環境と未知環境でのマッピングやナビゲーション、人追従走行、音声対話、タスクプランニングなどに焦点を当てている。

##セットアップ


-**ロケーション**：家庭環境を模したアリーナ環境を使用。競技はアリーナの内外で行われ、アリーナ内は事前にマッピング可能である。(アリーナは既知環境)


**スタートロケーション**：ロボットは二つの椅子の中心に向かって、Dining Roomの中心から開始する。
**紙バッグ**：オペレーターの近く(2m以内かつロボットから見える位置)に、2つの紙バッグを設置する。設置はTCOCにて行い、床に配置する。
**サイズ**：高さ27cm程度。
**オペレーター**：ロボットの前に立って競技で使用する紙バッグを指す。オペレーターは自チームから任意で選出してください。

> **Warning**
> ルールが変わる可能性がある．その際，全体で共有する．


## シナリオ

### スタートフェーズ

1.**受け渡し**：オペレーターとロボットがゴールに着いたのち、オペレーターはロボットから紙バッグを受け取り、ロボットにお礼をする。
2.**ナビゲーション**：ロボットは道環境から既知環境にある開始位置まで自律的に移動する。このとき、ロボットはさまざまな障害物を回避しながら自律走行を行うが、障害物に挑戦するかどうかは各チームが任意で決めることができる。障害物を回避するごとに加点され、最大3つの障害物に挑戦できる。
3.**ゴール**
　ロボットが開始位置に戻ったらタスク終了となる。

##ローカルルール
1.競技時間は**7分間**
2.レフェリーの人数は3名とし、競技中でないチームから1名ずつ出す。
3.開始位置の範囲は、開始位置に貼ってある印から半径50cm以内とする。
　(範囲内に少しでも入れば有効とする)
4.アリーナへの再入場は、ロボット全体がアリーナに入れば有効とする。
5.バッグの向きは横で固定し、縦で置くことはしない
6.紙バッグの把持、障害物の回避に関してはスキップを認める
7.デウスエクスマキナとして紙バッグを指定する際などに代替の信号手段を使用したい場合は、前日のTLMにて申告してください。

##メインゴール

| アクション | スコア |
|差された方の正しい荷物の前に行けた|100|
|どちらかの取っ手をひっかけた状態など不完全な状態で荷物把持ができた|50|
|完全に正しい状態で荷物把持ができた(両方の取っ手をひっかけられている)|50|
|オペレーターを追従することができ、アリーナ内を走行することができた|50|
|オペレーターを追従してアリーナから出ることができた|100|
|車(と仮定されたところ)までオペレーターを追従することができた)|100|
|オペレーターに荷物を渡すことができた|50|
|アリーナへの再入場|+50|
|開始位置に戻る|+50
|障害物を回避する①|+50|
|障害物を回避する②|+50|
|障害物を回避する③|+50|
|デウスエクスマキナ|
|荷物を落とす|-50|
|ロボットがオペレーターを見失った場合|
|ロボットが自動でオペレーターを再発見|-50|
|オペレーターに接触はしなかったが、いくつかやりとりをして再発見|-100|
|オペレーターへの直接接触での再発見|-200|
|大体の開始信号の使用|-100|
|不参加|-500|
| 合計スコア | 750点 |


## 運営(EC)による指示

- 準備
  - 紙バッグの位置を選び，オペレーターにバッグを割り当てる．
  - ロボットが屋外で直面する障害物を選択する．
  - ゴール（車）の位置を選択する．
  - アリーナの外に出るときは，ロボットに注意する．
- アナウンス（Setup day）
  - ロボットの`スタート地点`の選択し，アナウンスする．
  - どのバッグを使用するかの選択し，アナウンスする．


## レフェリー(TC)の動き

- 競技が終わった各チームの中から1人ずつに集まり，説明を受け，スコアシートを受け取る．
- シナリオに記載のレフェリーとして行動する．
- スコアシートに基づき，競技を採点する．
- 他のTCと採点内容を確認し合う．
- スコアシートを提出する．
