# Storing Groceries(Bリーグ用)

> [!NOTE]
> このルールはBリーグ用ルールです．
> Aリーグは基本的に世界大会ルールに準拠します


このタスクは，世界大会のルールをベースとする．基準となるルールブックは， `Version: 2025 Rev-1`である．

## メインゴール:
テーブル上の物体をキャビネットに移動し，カテゴリや類似性に応じてグループ化する．

## オプショナルゴール:
1. 小さな物体を移動する  
2. 重い物体を移動する  
3. 買い物袋から物体を取り出す  

## フォーカス:
- 物体の検出と認識  
- 物体の特徴認識  
- 物体操作  

---

## セットアップ

- **場所:**
  - **開始位置:** テスト前，ロボットはアリーナの外で待機し，ドアが開いたらテストエリアへ移動する．
  - **テスト位置:** キャビネットとテーブルがあるエリア．

- **人物:**
  - テストには人は関与しない．ただしロボットが支援を求めた場合を除く．

- **家具:**
  - **テーブル:** 
    - 前大会のTidyUpで使用したLong Tableを用いる
    - スペース確保のためにテーブルを二つ並べるなどのアレンジは行う
    - ロボットの手が届く場所に物体を配置する
    - ロボットがテーブルの反対側に回り込まないと取れないような物体配置は行わない
    - 5〜10個のオブジェクトが置かれており，ロボットは好きな順番で把持して良い
  - **買い物袋:** テーブルの隣の床にオブジェクトが5〜10個入った袋がある．
  - **キャビネット:** 異なる棚にカテゴリまたは類似性に基づいてグループ分けされた物体が入っている．オブジェクトを置く段は下から２段目〜４段目を使用する．棚板の位置（高さ）はWRSのTidy Upを参考に0.5m, 0.8m, 1.05mとする（棚板設置の穴位置等により誤差が生じる可能性がある．最もこの値に近い位置に棚板を設置する）
  - **キャビネットの扉:** 扉開けは行わない．扉は取り外された状態でフィールドはセットアップされる．
  - **Bin:** TidyUpで使用したBinを一つ配置する

- **物体:**
  - **テーブル上の物体:** 任意に配置されている．重ねる，積むといった配置は行わない．
  - **シリアル:** シリアルを注ぐタスクは実施しない．

---

### 競技の流れ

1. **テーブル位置の発表:** テストの少なくとも2時間前に，使用するテーブルとキャビネット，およびテーブルのおおよその位置が発表される．
2. **テスト開始:** アリーナのドアが開くとロボットがテストエリアに移動する．
3. **食料品の収納:** テーブルを認識後，物体をキャビネットもしくはBinに収納する．ただし， Binへの収納は補助的なものとし，**物体配置のスコアをキャビネットに収納した場合の1/2とし，さらに類似物体の隣に配置に関するスコアは得られない．**

---

### 追加ルールと注意事項

1. **テーブル位置:** テーブルの位置は事前に通知される．
2. **誤分類:** 類似物体と異なる棚に収納された場合，物体ごとに減点される．
3. **新カテゴリ:** 棚に既存のカテゴリがない場合，新しい棚にグループ化する．
4. **デウス・エクス・マキナ（人による支援）:** 以下の場合は減点される:
   - ロボットに物体の場所を伝えたり指差した場合  
   - 人が代わりに物体を移動した場合  

5. **認識の伝達:** ロボットは認識内容を審判に明確に伝える必要がある．指差しや掴もうとする動作で十分．可視化を用いる場合，どこを見るかを案内し，分かりやすく表示すること．バウンディングボックスを使用する際は，一度に1つの物体のみを表示し，周囲のシーンも見えるようにする．
6. **物体配置のスコアリング:** 競技終了時に配置された物体の状態でスコアを計算する（一度正しく配置できたとしても，競技中になんらかの理由で棚から物体が落下した場合等はスコアカウントの対象外とする）

---

### OC Instructions（テストの2時間前までに行うこと）

- 使用するテーブルとキャビネットの発表  
- テーブルの大まかな位置の発表  
- 使用する袋の選定  

---

### レフリー

- テーブルに5〜10個の物体を配置  
- テーブル近くの袋に5〜10個の物体を入れる  
- キャビネット内に物体をカテゴリまたは類似性ごとに配置  

---

### スコアシート

**制限時間: 7分00秒**

| アクション | スコア |
|------------|--------|
| **主要目標** | |
| テーブルへのナビゲーション | 15 |
| 物体の認識と正確な分類 | 5x15 |
| キャビネットへ運搬するための物体の把持 | 5x50 |
| キャビネット内の物体を認識し，現在取り扱っている物体をどの段に置くか発話する | 5x15 |
| キャビネットへの配置 | 5x15 |
| オブジェクトを類似物体の隣に正しく配置 | 5x50 |
| **ボーナス** | |
| 買い物袋から物体を掴む | 50 |
| 小さな物体の把持 | 70 |
| 小さな物体の配置 | 30 |
| 重い物体の把持 | 70 |
| 重い物体の配置 | 30 |
| **デウス・エクス・マキナによる減点** | |
| 人がロボットに物体を手渡す | 5x–50 |
| 人がキャビネットに物体を置く | 5x–15 |
| 人が類似物体の隣に物体を置く | 5x–50 |
| 人が物体を置く位置を指差す | 5x–25 |
| **Special Penalties & Bonuses** | |
| Not attending（セクション3.9.1参照） | –500 |
| Using alternative start signal（3.7.8参照） | –100 |
| 特に優れたしたパフォーマンス（3.9.3参照） | 149 |

**合計スコア（Special Penalties & Bonusesを除く）: 990**